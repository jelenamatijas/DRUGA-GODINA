<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kratak opis stranice">
    <!--<link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/odometer.js/0.4.7/themes/odometer-theme-default.css"
    integrity="sha512-kMPqFnKueEwgQFzXLEEl671aHhQqrZLS5IP3HzqdfozaST/EgU+/wkM07JCmXFAt9GO810I//8DBonsJUzGQsQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
    />-->

    <style>
            
      body {
          margin: 0;
          font-family: "DM Sans", sans-serif;
        }
        .stat-heading-wrapper{
          text-align: center;
        }
        .stats-subheader{
          margin-bottom: 60px;
          font-size: 20px;
          color: #6c6b6ca7;
        }
      .stats-header{
          font-family: 'DM Sans',sans-serif;
          margin-top: 120px;
          margin-bottom: 30px;
          font-size: 82px;
          text-align: center;
          color: #1E0E62;
          font-weight: bolder;
      }
        section {
          height: 100vh;
          background: #fefae0;
          display: grid;
          place-items: center;
          font-size: 90px;
        }
        
        .stats-container {
          display: grid;
          gap: 24px;
          grid-template-columns: 1fr 1fr 1fr;
          margin: 30px auto;
          max-width: 1000px;
          padding-inline: 16px;
        }
        
        .stats-container .stat {
          background: white;
          border:1px solid #EBEAED;
          border-radius: 25px;
          padding: 24px;
          text-align: center;
          color: #3EACAF;
        }
        
        .stats-container .stat .odometer {
          font-size: 50px;
          font-weight: bold;
          display: inline-block;
        }
        
        .stats-container .stat .type {
          font-size: 20px;
        }
        
        .odometer.plus {
          position: relative;
        }
        
        .odometer.plus::after {
          content: "";
          position: absolute;
          top: 0;
          right: -16px;
          font-size: 20px;
        }
        
        @media (max-width: 700px) {
          .stats-container {
            grid-template-columns: 1fr;
          }
        }

      .Employe{
          font-size: 40px;
          font-weight: bold;
          margin-bottom: 20px;
      }
    </style>
    <title>Statistcs</title>
</head>
<body>
   
    <div class="stat-heading-wrapper">
        <div class="stats-header">STATISTICS</div>
        <div class="stats-subheader">Keep track of operators work!</div>
   </div>
    <div class="stats-container">
      <div class="stat">
        <div class="subscribers-odometer odometer plus" id="total-number"></div>
        <div class="type">Total number of tickets</div>
      </div>

      <div class="stat">
        <div class="videos-odometer odometer plus" id="resolved-tickets"></div>
        <div class="type">Resolved tickets</div>
      </div>

      <div class="stat">
        <div class="Employe" id="best-operator"></div>
        <div class="Employe-txt">Employe of the Month!</div>
      </div>
    </div>
    

    <!--<script
      src="https://cdnjs.cloudflare.com/ajax/libs/odometer.js/0.4.7/odometer.min.js"
      integrity="sha512-v3fZyWIk7kh9yGNQZf1SnSjIxjAKsYbg6UQ+B+QxAZqJQLrN3jMjrdNwcxV6tis6S0s1xyVDZrDz9UoRLfRpWw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
      >

      const createOdometer = (el, value) => {
      const odometer = new Odometer({
        el: el,
        value: 0,
      });
    
      let hasRun = false;
    
      const options = {
        threshold: [0, 0.9],
      };
    
      const callback = (entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            if (!hasRun) {
              odometer.update(value);
              hasRun = true;
            }
          }
        });
      };
    
      const observer = new IntersectionObserver(callback, options);
      observer.observe(el);
    };
    
    const subscribersOdometer = document.querySelector(".subscribers-odometer");
    createOdometer(subscribersOdometer, 150);
    
    const videosOdometer = document.querySelector(".videos-odometer");
    createOdometer(videosOdometer, 58);
  
  </script>-->

  <script>
    const postData = async () => {
    try {
        const response = await fetch('http://localhost:18080/statistics', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
        });

        if (response.ok) {
            const ticketData = await response.json();
            document.getElementById("total-number").innerText = ticketData.numberOfTickets;
            document.getElementById("resolved-tickets").innerText = ticketData.resolved;
            document.getElementById("best-operator").innerText =ticketData.bestOperator;
        } else {
            console.error("Error:", response.status, response.statusText);
        }
      } catch (error) {
          console.error("Fetch error:", error);
      }
  };

  // Pozivanje funkcije
  postData();
  </script>
</body>
</html>