<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin page</title>

    
    <style>
        .button-container {
            display: flex;
            align-items: center;
            gap: 10px; 
        }

        #upgrade-btn {
            margin: 0; 
        }

        #logoutButton {
            margin: 0; 
            width: 42px;
            height: 42px;
        }
        .save-btn-style{
            margin-right: 0px;
            
            width: 100px;
            height: 60px;
            background-color: #229C9F;
            border:none;
            border-radius: 100px;
            color: white;
            transition: background-color 0.3s ease;
            cursor: pointer;
        }
        .save-btn-style:hover{
            background-color: #175051;
        }
        #logoutButton {
            margin-right: 10px;
            width: 42px;
            height: 42px;
            cursor: pointer;
           
        }
        .admin-header{
            margin-bottom: 50px;
            padding-right: 0px;
            padding-left: 0px;
            width: 100%;
            height: 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'DM Sans',sans-serif;
        }
        .admin-logo{
            margin-left: 0px;
            font-size: 20px;
            font-weight: bolder;
            line-height: 26px;
            letter-spacing: 0px;
            color: #229C9F;
        }
        .admin-name{
            font-size: 26px;
            font-weight: 400;
            line-height: 26px;
            color: #1E0E62;  
            text-align: center;
        }
        .admin-header-img{
            margin-right: 0px;
            width: 42px;
            height: 42px;
            cursor: pointer;
        }
        .admin-container{
            margin-left: 88px;
            margin-right: 88px;
            margin-top: 60px;
            font-family: 'DM Sans',sans-serif;
            text-align: center;
        }

        .admin-wrapper{
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .admin-heading-wrapper{
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: baseline;
            
        }
        .admin-heading{
            margin-bottom: 100px;
            font-size: 42px;
            font-weight: bold;
            color: #1E0E62;
            line-height: 52px;
            letter-spacing: -0.4px;

        }

        .admin-box-wrapper{
            margin-top: 0px;
            display: flex;
        }

        .box{
            margin-left: 30px;
            margin-right: 30px;
            width:381.57px;
            height: 361.76px;
            border: 2px solid;
            border-color: #EBEAED;
            border-radius: 10px;;
            cursor: pointer;
        }
        .box-title{
            margin-left: auto;
            margin-right: auto;
            width:221.14px;
            height: 34.05;
            font-size: 22px;
            line-height: 32px;
            letter-spacing: 0px;
            font-weight:600;
            color: #1E0E62;
        }
        .box-description{
            margin-left: auto;
            margin-right: auto;
            margin-top:23px;
            width:283.89px;
            color:rgba(21, 20, 57, 0.4);
        }
        .admin-img{
            margin-top:60px;
            margin-bottom: 40px;
        }
    </style>
</head>
<body>
    <div class="admin-header">
        <div class="admin-logo">GROUP 6</div>
        <div class="admin-name" id = "username">Admin</div>
        <div class="button-container">
            <button class="save-btn-style" id="upgrade-btn">UPGRADE</button>
            <img src="pngwing.png" class="admin-img" id="logoutButton" alt="Logout">
        </div>
    </div>
    <div class="admin-container">
        <div class="admin-wrapper">
            <div class="admin-heading-wrapper"> 
                <div class="admin-heading">Checkup on the current work!</div>
            </div>   
   
        <div class="admin-box-wrapper">
            <div class="box" data-link="/make-user.html">
                <img src="fa-code.png" class="admin-img">
                <div class="box-title">Make New User</div>
                <div class="box-description">Make new operator or client profiles and generate their usernames and passwords.</div>
            </div>
            <div class="box" data-link="/show-tickets-admin.html">
                <img src="fa-toggle-on.png" class="admin-img">
                <div class="box-title">Show Tickets</div>
                <div class="box-description">See all your current tickets in one place. </div>
            </div>
            <div class="box" data-link="/statistics.html">
                <img src="fa-paint-brush.png" class="admin-img">
                <div class="box-title">See statistics</div>
                <div class="box-description">Check how work is done.</div>
            </div>
        </div>
    </div>
    <script>
        const params = new URLSearchParams(window.location.search);
        const userId = params.get("id");
        const userType = params.get("userType");
        const username = params.get("username");

        if(username){
            document.getElementById("username").textContent = username;
        }
        else{
            document.getElementById("username").textContent = "ADMINISTRATOR";
        }
        
        document.querySelectorAll(".box").forEach((box) => {
            box.addEventListener("click", function () {
                const link = this.getAttribute("data-link");
                if (link) {
                    const url = `${link}?username=${encodeURIComponent(username)}&id=${userId}&typeOfUser=${encodeURIComponent("Administrator")}`;
                    window.location.href = url;
                }
            });
        });

        document.getElementById("logoutButton").addEventListener("click", function () {
            localStorage.clear(); 

            fetch("http://localhost:18080/logout", {
                method: "POST",
            }).then(() => {
                window.location.href = "http://localhost:18080/sign-in.html";
            }).catch(error => {
                console.error("Logout failed:", error);
                alert("An error occurred while logging out.");
            });
        });

        document.getElementById("upgrade-btn").addEventListener("click", function () {
            localStorage.clear(); 

            const url = `http://localhost:18080/upgrade.html?username=${encodeURIComponent(username)}&id=${userId}&typeOfUser=${encodeURIComponent(userType)}`;
                window.location.href = url; 
        });

    </script>
</body>